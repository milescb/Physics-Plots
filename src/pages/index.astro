---
import Base from '../layouts/Base.astro';
import plotsData from '../data/projects.json';
import ztautauConfig from '../data/ztautau.json';
import taucpmlConfig from '../data/taucp-ml.json';
import '../styles/index.css';

const configMap = {
  'ztautau': ztautauConfig,
  'taucp-ml': taucpmlConfig
};

const projects = plotsData.projects.map((project) => ({
  ...project,
  subpages: configMap[project.id].subpages
}));
---

<Base title="Physics Analysis Plots">
  <div class="container">
    <header>
      <h1>Physics Project Plots</h1>
      <p class="subtitle">Interactive plot viewer for analysis results and algorithm development</p>
    </header>

    <div class="projects-grid">
      {projects.map((project) => (
        <a href={`/${project.id}`} class="project-card">
          <div class="project-header">
            <h2>{project.name}</h2>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </div>
          <p class="project-description">{project.description}</p>
          <div class="project-meta">
            <span>{project.subpages.length} categories</span>
            <span>
              {project.subpages.reduce((sum, sp) => sum + sp.plots.length, 0)} plot books
            </span>
          </div>
        </a>
      ))}
    </div>
  </div>

</Base>
